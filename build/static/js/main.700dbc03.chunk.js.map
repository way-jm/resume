{"version":3,"sources":["../ /^/.//styles.*/.css$","components/style-text/styles0.css","components/style-text/styles1.css","components/style-text/styles2.css","components/work-text/work.txt","utils/util.ts","components/style-text/style-text.tsx","components/work-text/work-style.tsx","App.tsx","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","openComment","commentRegex","keyRegex","valueRegex","selectorRegex","pxRegex","pxRegex2","handleChar","fullText","char","slice","replace","test","endOfSentence","comma","endOfBlock","StyleText","props","useReducer","state","text","setText","innerRef","styleBuffer","elRef","useRef","styleText","i","require","writeTo","el","message","index","interval","charsPerInterval","a","animationSkipped","chars","scrollTop","scrollHeight","writeChar","length","thisInterval","thisSlice","Promise","delay","paused","styleAppend","useImperativeHandle","write","current","writeToEnd","txt","join","styleHTML","styleOverwrite","contentEditable","dangerouslySetInnerHTML","__html","ref","toHTML","Markdown","markdown","WorkStyle","workRef","el2Ref","writeSimpleChar","workText","mdText","useState","flipped","setFlipped","show","setShow","preview","setPreview","showWorkBox","setTimeout","flipping","wheel","dx","dy","half","clientHeight","className","App","styleRef","styleTagEl","document","getElementById","startAnimation","surprisinglyShortAttentionSpan","useEffect","then","textContent","ReactDOM","render"],"mappings":"wKAAA,IAAIA,EAAM,CACT,gBAAiB,GACjB,gBAAiB,GACjB,gBAAiB,IAIlB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,I,cCxBpBU,EAAOC,QAAU,0xF,cCAjBD,EAAOC,QAAU,ypB,cCAjBD,EAAOC,QAAU,umC,oBCAjBD,EAAOC,QAAU,shN,sICAbC,GAAc,EACZC,EAAe,4BACfC,EAAW,oBACXC,EAAa,WACbC,EAAgB,QAChBC,EAAU,MACVC,EAAW,KAGXC,EAAa,SAACC,EAAkBC,GAoBlC,OAnBIT,GAAwB,MAATS,EACfD,GAAYC,EACI,MAATA,GAAiBT,EAGR,MAATS,GAAuC,MAAvBD,EAASE,OAAO,IAAcV,GACrDA,GAAc,EACdQ,EAAWA,EAASG,QAAQV,EAAc,qCAC1B,MAATQ,EACPD,EAAWA,EAASG,QAAQT,EAAU,gCACtB,KAATO,EACPD,EAAWA,EAASG,QAAQR,EAAY,iCACxB,MAATM,EACPD,EAAWA,EAASG,QAAQP,EAAe,qCAC3B,MAATK,GAAgBJ,EAAQO,KAAKJ,EAASE,OAAO,IACpDF,EAAWA,EAASG,QAAQL,EAAU,oCAEtCE,GAAYC,GAdZT,GAAc,EACdQ,GAAYC,GAeTD,GChBLK,EAAgB,+BAChBC,EAAQ,0BACRC,EAAa,YAyEJC,EAvE6B,SAACC,GAAU,MAI3BC,sBAHxB,SAAcC,EAAUV,GACpB,OAAOF,EAAWY,EAAMV,KAEa,IAJU,mBAI5CW,EAJ4C,KAItCC,EAJsC,KAK5CC,EAAYL,EAAZK,SAEHC,EAAY,GAEVC,EAAQC,iBAAO,MACfC,EAAY,CAAC,EAAG,EAAG,GAAGzC,KAAI,SAAA0C,GAG5B,OAAOC,MAAQ,WAA0BD,EAAI,WAE3CE,EAAY,uCAAG,WAAOC,EAAaC,EAAiBC,EAAeC,EAAkBC,GAAtE,mBAAAC,EAAA,0DACblB,EAAMmB,iBADO,sBAEP,IAAI3C,MAAM,WAFH,UAIb4C,EAAQN,EAAQrB,MAAMsB,EAAOA,EAAQE,GACzCF,GAASE,EAETJ,EAAGQ,UAAYR,EAAGS,aAElBC,EAAUH,KAENL,EAAQD,EAAQU,QAXH,iBAYTC,EAAeT,EACfU,EAAYZ,EAAQrB,MAAMsB,EAAQ,EAAGA,GACrClB,EAAMF,KAAK+B,KACXD,EAA0B,GAAXT,GAEfpB,EAAcD,KAAK+B,KACnBD,EAA0B,GAAXT,GAEnBU,EAAYZ,EAAQrB,MAAMsB,EAAQ,EAAGA,EAAQ,GACzCjB,EAAWH,KAAK+B,KAChBD,EAA0B,GAAXT,GAtBN,yBA0BHW,IAAQC,MAAMH,GA1BX,WA2BJzB,EAAM6B,OA3BF,kDA4BNjB,EAAQC,EAAIC,EAASC,EAAOC,EAAUC,IA5BhC,4CAAH,8DA+BZM,EAAY,SAAC/B,GACfY,EAAQZ,GACRc,GAA0Bd,EACb,MAATA,GAAqB,MAAPA,IACdQ,EAAM8B,YAAYxB,GAClBA,EAAY,KAiBpB,OAdAyB,8BAAoB1B,GAAU,iBAAO,CACjC2B,MAAM,WAAD,4BAAE,WAAOjB,GAAP,SAAAG,EAAA,sEACGN,EAAQL,EAAM0B,QAASxB,EAAUM,GAAQ,EDlE7C,GCkEuD,GADtD,2CAAF,mDAAC,GAGNmB,WAAY,WAGR,IAFA,IAAIC,EAAM1B,EAAU2B,KAAK,MACrBC,EAAY,GACP3B,EAAI,EAAGA,EAAIyB,EAAIX,OAAQd,IAC5B2B,EAAY/C,EAAW+C,EAAWF,EAAIzB,IAE1CN,EAAQiC,GACRrC,EAAMsC,eAAe,oCAAsCH,QAG5D,yBAAKhE,GAAG,aAAaoE,iBAAe,EAACC,wBAAyB,CAACC,OAAQtC,GAAOuC,IAAKnC,K,wBC5ExFoC,E,OAASC,EAASC,SAASF,OAO3B/C,EAAgB,+BAChBC,EAAQ,0BACRC,EAAa,YAqGJgD,EApG6B,SAAC9C,GAAW,IAC7C+C,EAAW/C,EAAX+C,QAOP,IAAMC,EAAsCxC,iBAAoB,MAE1DI,EAAY,uCAAG,WAAOC,EAAaC,EAAiBC,EAAeC,EAAkBC,GAAtE,mBAAAC,EAAA,yDACbE,EAAQN,EAAQrB,MAAMsB,EAAOA,EAAQE,GACzCF,GAASE,EAETJ,EAAGQ,UAAYR,EAAGS,aAClB2B,EAAgB7B,KAEZL,EAAQD,EAAQU,QAPH,iBAQTC,EAAeT,EACfU,EAAYZ,EAAQrB,MAAMsB,EAAQ,EAAGA,GACrClB,EAAMF,KAAK+B,KACXD,EAA0B,GAAXT,GAEfpB,EAAcD,KAAK+B,KACnBD,EAA0B,GAAXT,GAEnBU,EAAYZ,EAAQrB,MAAMsB,EAAQ,EAAGA,EAAQ,GACzCjB,EAAWH,KAAK+B,KAChBD,EAA0B,GAAXT,GAlBN,yBAsBHW,IAAQC,MAAMH,GAtBX,WAuBJzB,EAAM6B,OAvBF,kDAwBNjB,EAAQC,EAAIC,EAASC,EAAOC,EAAUC,IAxBhC,4CAAH,8DA2BZgC,EAAkB,SAACzD,GACrBY,EAAQZ,IAtCuC,EAyC3BS,sBArCxB,SAAcC,EAAYV,GACtB,OAAOF,EAAWY,EAAOV,KAoCY,IAzCU,mBAyC5CW,EAzC4C,KAyCtCC,EAzCsC,KA2C7C8C,EAAWvC,EAAQ,IACnBwC,EAASR,EAAOO,GA5C6B,EA8CrBE,oBAAS,GA9CY,mBA8C5CC,EA9C4C,KA8CnCC,EA9CmC,OA+C3BF,oBAAS,GA/CkB,mBA+C5CG,EA/C4C,KA+CtCC,EA/CsC,OAgDrBJ,oBAAS,GAhDY,mBAgD5CK,EAhD4C,KAgDnCC,EAhDmC,KAmFnD,OAjCA3B,8BAAoBgB,GAAS,iBAAO,CAChCf,MAAM,WAAD,4BAAE,WAAOjB,GAAP,SAAAG,EAAA,6DACHsC,GAAQ,GADL,SAEG5C,EAAQoC,EAAOf,QAASiB,EAAU,EFjEtC,GEiEgD,GAF/C,2CAAF,mDAAC,GAINS,YAAa,WACTH,GAAQ,GACRE,GAAW,GACXJ,GAAW,GACXM,YAAW,WAEPZ,EAAOf,QAAQZ,UAAY,KAE3B,IAAIwC,GAAW,EAEfC,IAAMd,EAAOf,QAAR,uCAAiB,WAAgB8B,EAAGC,GAAnB,eAAA9C,EAAA,0DACd2C,EADc,oDAEdI,GAAQjB,EAAOf,QAAQX,aAAe0B,EAAOf,QAAQiC,cAAgB,IAC1Db,EAAUL,EAAOf,QAAQZ,UAAY4C,EAAOjB,EAAOf,QAAQZ,UAAY4C,GAHpE,wBAMdX,GAAYD,GACZQ,GAAW,EAPG,SAQRlC,IAAQC,MAAM,KARN,OASdoB,EAAOf,QAAQZ,UAAYgC,EAAU,KAAO,EAC5CQ,GAAW,EAVG,QAajBb,EAAe3B,WAAc2C,GAAMX,GAAW,EAAI,GAbjC,4CAAjB,yDAcF,KACJ,UAGJ,oCACFE,EACG,yBAAKpF,GAAG,YAAYuE,IAAKM,EAAQmB,UAAWd,EAAU,UAAY,IAC7DI,EACG,yBAAKjB,wBAAyB,CAACC,OAAQtC,KAEvC,6BACI,yBAAKgE,UAAU,OAAO3B,wBAAyB,CAACC,OAAQS,KACxD,yBAAKiB,UAAU,KAAK3B,wBAAyB,CAACC,OAAQU,OAIhE,OCzDCiB,EAnDO,WAClB,IAAMC,EAAwC7D,mBACxCuC,EAAuCvC,mBACzC8D,EAAaC,SAASC,eAAe,aACnCC,EAAc,uCAAG,sBAAAvD,EAAA,+EAETmD,EAASpC,QAAQD,MAAM,GAFd,uBAGTe,EAAQd,QAAQD,QAHP,uBAITqC,EAASpC,QAAQD,MAAM,GAJd,cAKfe,EAAQd,QAAQ0B,cALD,UAMThC,IAAQC,MAAM,KANL,yBAOTyC,EAASpC,QAAQD,MAAM,GAPd,6DASG,YAAd,KAAElB,QATS,iBAUX4D,IAVW,6FAAH,qDAgBdA,EAAiC,WACnCL,EAASpC,QAAQC,cAarB,OAJAyC,qBAAU,WACNF,IAAiBG,SAElB,IAEC,yBAAKzG,GAAG,OACJ,kBAAC,EAAD,CACIgD,kBAAkB,EAClBU,QAAQ,EACRS,eAZW,SAAC7B,GACpB6D,EAAWO,YAAcpE,GAYjBqB,YAhBQ,SAACrB,GACjB6D,EAAWO,aAAepE,GAgBlBJ,SAAUgE,IACd,kBAAC,EAAD,CACIxC,QAAQ,EACRkB,QAASA,MC7CzB+B,IAASC,OACL,kBAAC,EAAD,MACAR,SAASC,eAAe,W","file":"static/js/main.700dbc03.chunk.js","sourcesContent":["var map = {\n\t\"./styles0.css\": 22,\n\t\"./styles1.css\": 23,\n\t\"./styles2.css\": 24\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 21;","module.exports = \"/**\\n *\\n * 你好啊, 我是卫正明（Way）。\\n *\\n * 我喜欢捣鼓一些有趣的玩意儿。\\n *\\n * 要不来一场直播写代码？\\n */\\n\\n/**\\n * 那么开始吧，首先让一切都动起来~\\n */\\n\\n* {\\n  -webkit-transition: all 1s;\\n}\\n\\n/**\\n * 这看似没用呀，别急，一会儿你就会看到效果了。\\n *\\n * 黑白配色太无聊了，让我来做一些变化。\\n */\\n\\nhtml {\\n  background: rgb(63, 82, 99);\\n}\\n\\n/***\\n * 等等。\\n */\\n\\npre, a {\\n  color: white;\\n  box-sizing: border-box;\\n\\n}\\n\\n/**\\n * 看上去好多了。但是有点刺眼了。\\n *\\n * 而且在整个屏幕上写代码有点浪费空间了。\\n *\\n * 不要着急哦，让我来做一些优化。\\n */\\n\\npre:not(:empty) {\\n  overflow: auto;\\n  background: rgb(48, 48, 48);\\n  border: 1px solid #ccc;\\n  max-height: 44.6%;\\n  width: 49%;\\n  font-size: 14px;\\n  font-family: monospace;\\n  padding: 10px 10px 20px;\\n  box-shadow: -4px 4px 2px 0 rgba(0,0,0,0.3);\\n  white-space: pre-wrap;\\n  outline: 0;\\n  position: absolute;\\n}\\n\\n/**\\n * 接下来我们在把它移到屏幕右侧。\\n */\\n\\n#style-text {\\n  -webkit-transform: translateX(95%);\\n  position: absolute;\\n}\\n\\n/**\\n * 看上去还不错喔, 但是所有的字体颜色是白色的！\\n *\\n * 那么，我们来把代码变的更加可读吧~\\n */\\n\\n.comment       { color: #857F6B; font-style: italic; }\\n.selector      { color: #E69F0F; }\\n.selector .key { color: #64D5EA; }\\n.key           { color: #64D5EA; }\\n.value         { color: #BE84F2; }\\n.value.px      { color: #F92772; }\\n\\n/**\\n * 现在我们有了一些进展。\\n *\\n * 再把它变得更立体&饱满一些。\\n */\\n\\nbody {\\n  -webkit-perspective: 1000px;\\n}\\n\\n#style-text {\\n  -webkit-transform: translateX(98.5%) rotateY(-10deg);\\n  -webkit-transform-origin: right;\\n  max-height: 94.5%;\\n}\\n\\n/**\\n * 好吧差不多了，接下来就聊聊我自己吧。\\n *\\n * 我相信你应该不是来看我炫技的吧？\\n */\\n\\npre:not(#style-text) {\\n  -webkit-transform: rotateY(10deg);\\n  -webkit-transform-origin: left;\\n}\\n/**/\\n\\n\"","module.exports = \"/**\\n * 左侧的 markdown 看起来并不美观。\\n *\\n * 我们稍作修饰。\\n */\\n#work-text {\\n  max-height: 94.5%;\\n}\\n\\n#work-text.flipped {\\n  -webkit-transform: rotateX(0deg) rotateY(190deg) rotateZ(180deg);\\n}\\n\\n#work-text .md {\\n  -webkit-transform: rotateY(190deg) rotateZ(180deg);\\n  margin-top: 1200px;\\n}\\n\\n/**\\n * 下面就是见证奇迹的时刻：\\n *\\n * 3。\\n * 2。\\n * 1。\\n *\\n * 。\\n * 骗你啦，啥也没有~\\n *\\n * 好吧，其实是有的，来了。\\n *\\n */\\n\"","module.exports = \"\\n/**\\n * 文本可以做一些适当调整。\\n */\\n\\n.md {\\n  font-family: \\\"Helvetica Neue\\\", Helvetica, sans-serif;\\n}\\n\\n.md h1, .md h2, .md h3, .md h4, .md h5, .md h6 {\\n  display: inline-block;\\n  color: #ddd;\\n  border-bottom: 1px solid #ccc;\\n  padding-bottom: 5px;\\n}\\n\\n.md li {\\n  margin: 5px 0;\\n  line-height: 1.5;\\n}\\n\\n.md h1, .md h2, .md h3, .md h4, .md h5, .md h6, .md ul, .md p {\\n  margin: 0;\\n}\\n\\n\\n/**\\n * 还差最后一点就结束了。\\n */\\n\\npre:hover{\\n  box-shadow: 0 0 40px 5px rgba(255,255,255,0.4);\\n}\\n\\n/**\\n * 希望你能喜欢，这个创意是参考国外一个牛人的，\\n * 然后看到滴滴某大神用Vue重构了一下，\\n * 我觉得很有趣，也用React+Hooks+TS重构了一下。\\n * 如果您觉得我还不错，可以与我联系~，ღ( ´･ᴗ･` )比心\\n */\\n\\n\\n\"","module.exports = \"\\n基本资料\\n=========\\n\\n* 姓名：卫正明 。\\n* Email： 1904628089@qq.com 。\\n* GitHub：https://github.com/way-jm 。\\n* PHONE: 18221924339\\n* BD： 1992.06.27\\n\\n个人概况\\n-------\\n\\n* 规规矩矩的前端儿，不靠谱的Noder & Pythoner ，深度学习爱好者。\\n* 喜欢助人为乐的开源开发者(xr-storage，Want，wayswipe) 。\\n* 丰富的前端工作经验和一些后端(Base PHP & Node)开发经验。\\n* 熟悉Vue，React等MVVM框架，包括Vuex，Redux，Hooks，基于Umi和ant design的开发经验。\\n* 丰富的TypeScript使用经验，Node,Koa2后端开发经验\\n* Serverless,AWS Lambda 使用经验\\n* 自构微前端框架，以及开源微前端框架qiankun，wujie的使用和改造老项目经验\\n* 卓越的CSS能力，熟悉sass，less，stylus。\\n* webVR 开发经验。\\n* 原生微信小程序 & 小程序云开发 & 小程序云托管\\n* 熟悉webpack配置，了解各种loader，plugin的使用和自定义。\\n* 很强的学习能力。\\n* 国际日本语能力测试一级（最高级别）。\\n\\n\\n教育背景\\n-------\\n* 2010.9-2014.6  本科：中南林业科技大学\\n* 2014.9 。。。。没有更高学历了，我一直认为我是南大未过门的学生。\\n\\n工作经历\\n------\\n* 2022.4 -至今  HLI中国区(Human longevity Inc)\\n   -AI 医疗平台Physician Terminal(US Site和CN Site同码异构)的前端主导开发\\n   -用户端React-native 的开发\\n   -BFF Node Serverless 的维护和升级\\n   -主持企业级业务组件库的创建和维护\\n   -前端架构的优化，拆分和升级工作\\n   -和美国前端团队协同开发，共同维护合保障多个项目的迭代运行\\n* 2021.8~2022.4  小米南京研发中心前端\\n   -前端组件库\\n   -项目构架代码的升级优化\\n   -交付多个有品电商商家端的业务前端项目。\\n   （随着22年4月南京研发中心撤销，被裁员）\\n\\n* 2019.5—2021.7  安徽阡陌网络科技（芜湖） 前端工程师\\n  -参与多个GIS项目的前端部分，包括湖南农业保险，芜湖水清岸绿项目，参与PC端展示页面，后台管理页面，移动端，和客户端混合开发等等。\\n\\n  -通用脚手架，鉴于项目中很多同质化的模块可以共用，基于\\\"约定生配置，配置生万物\\\"的原则，基于React+Redux+redux-thunk+Hooks+ant design+TypeScript搭建了\\n  公司项目后台管理的通用脚手架Want(way&ant),大大减轻了前端开发模块的工作量，定义了开发流程和规范，为更高程度敏捷开发提供可能。脚手架也开源了（https://github.com/way-jm/want），并且\\n  上传到了Ant design官方脚手架市场(https://scaffold.ant.design/#/scaffolds/want)。\\n\\n  -xr-storage开源库的开发。根据业务中经常使用的对于storage的操作，使用Typescript开发了xr-storage库，使用原生Typescript开发，天然支持TS，不依赖于任何\\n  第三方模块。更加便利，开箱即用（https://way-jm.github.io/xr-storage/start/start.html）。几乎在公司的全系列产品中都有使用。\\n\\n  -研究深度学习在公司遥感项目上的落地，最终没有研究成功，但是对于普适性的人脸识别和物体分类有阶段性成果。\\n\\n* 2016.8-2019.5 上海厚步网络科技有限公司 前端工程师\\n  -参与公司积分墙项目，金融产品项目的前端工作，已经部分PHP开发工作。这期间主要是使用Vue周边技术。\\n  -完成公司前端框架从jquery到MVVM的跨域。\\n\\n  -开源组件库 wayswipe的开发,参考(https://github.com/way-jm/wayswipe);\\n\\n  -参与了一些PHP的社区工作，如参与PHP开源框架Laravel的翻译工作,参考(https://learnku.com/users/22754/translations)\\n\\n* 2014.6-2016.8 日本渊本重工上海工厂  技术顾问助理&日语翻译\\n\\n* 2020.9 -2021.1 香港梦猷科技签约翻译\\n* 2020.10~ 日本CCLesson在线中文讲习老师(公益)\\n\"","let openComment = false;\nconst commentRegex = /(\\/\\*(?:[^](?!\\/\\*))*\\*)$/;\nconst keyRegex = /([a-zA-Z- ^\\n]*)$/;\nconst valueRegex = /([^:]*)$/;\nconst selectorRegex = /(.*)$/;\nconst pxRegex = /\\dp/;\nconst pxRegex2 = /p$/;\nconst speed = 16;\n\nconst handleChar = (fullText: string, char: string) => {\n    if (openComment && char !== '/') {\n        fullText += char;\n    } else if (char === '/' && !openComment) {\n        openComment = true;\n        fullText += char;\n    } else if (char === '/' && fullText.slice(-1) === '*' && openComment) {\n        openComment = false;\n        fullText = fullText.replace(commentRegex, '<span class=\"comment\">$1/</span>');\n    } else if (char === ':') {\n        fullText = fullText.replace(keyRegex, '<span class=\"key\">$1</span>:');\n    } else if (char === '') {\n        fullText = fullText.replace(valueRegex, '<span class=\"value\">$1</span>');\n    } else if (char === '{') {\n        fullText = fullText.replace(selectorRegex, '<span class=\"selector\">$1</span>{');\n    } else if (char === 'x' && pxRegex.test(fullText.slice(-2))) {\n        fullText = fullText.replace(pxRegex2, '<span class=\"value px\">px</span>');\n    } else {\n        fullText += char;\n    }\n    return fullText;\n};\n\nexport {handleChar,speed};\n","import React, {useRef, useImperativeHandle,useReducer} from 'react';\nimport {handleChar} from \"../../utils/util\";\nimport Promise from 'bluebird';\nimport {speed} from \"../../utils/util\";\n\ninterface propsInterface {\n    animationSkipped: boolean,\n    paused: boolean,\n    styleOverwrite?: any,\n    styleAppend?: any\n    innerRef?: any\n}\n\nconst endOfSentence = /[？！。~：]$/;\nconst comma = /\\D[，；、]$/;\nconst endOfBlock = /[^/]\\n\\n$/;\n\nconst StyleText: React.FC<propsInterface> = (props) => {\n    function setT(state:any,char:string) {\n        return handleChar(state,char)\n    }\n    const [text, setText] = useReducer(setT, '');\n    const {innerRef} = props;\n    // 这里需要使用强制同步数据流传递给父组件，useState，useReducer都不满足要求\n    let styleBuffer='';\n\n    const elRef = useRef(null);\n    const styleText = [0, 1, 2].map(i => {\n\n\n        return require('!!raw-loader!./styles' + i + '.css');\n    });\n    const writeTo: any = async (el: Element, message: string, index: number, interval: number, charsPerInterval: number) => {\n        if (props.animationSkipped) {\n            throw new Error('SKIP IT');\n        }\n        let chars = message.slice(index, index + charsPerInterval);\n        index += charsPerInterval;\n\n        el.scrollTop = el.scrollHeight;\n\n        writeChar(chars);\n\n        if (index < message.length) {\n            let thisInterval = interval;\n            let thisSlice = message.slice(index - 2, index);\n            if (comma.test(thisSlice)) {\n                thisInterval = interval * 30;\n            }\n            if (endOfSentence.test(thisSlice)) {\n                thisInterval = interval * 70;\n            }\n            thisSlice = message.slice(index - 2, index + 1);\n            if (endOfBlock.test(thisSlice)) {\n                thisInterval = interval * 50;\n            }\n\n            do {\n                await Promise.delay(thisInterval);\n            } while (props.paused);\n            return writeTo(el, message, index, interval, charsPerInterval);\n        }\n    };\n    const writeChar = (char: string) => {\n        setText(char);\n        styleBuffer=styleBuffer + char;\n        if (char === ';'||char==='}') {\n            props.styleAppend(styleBuffer);\n            styleBuffer='';\n        }\n    };\n    useImperativeHandle(innerRef, () => ({\n        write: async (index: number) => {\n            await writeTo(elRef.current, styleText[index], 0, speed, 1);\n        },\n        writeToEnd: () => {\n            let txt = styleText.join('\\n');\n            let styleHTML = '';\n            for (let i = 0; i < txt.length; i++) {\n                styleHTML = handleChar(styleHTML, txt[i]);\n            }\n            setText(styleHTML);\n            props.styleOverwrite('#work-text * {transition: none; }' + txt);\n        }\n    }));\n    return <pre id='style-text' contentEditable dangerouslySetInnerHTML={{__html: text}} ref={elRef}/>;\n};\n\nexport default StyleText;\n","import React, {useImperativeHandle, useReducer, useState, useRef} from 'react';\nimport Promise from 'bluebird';\nimport {handleChar} from \"../../utils/util\";\nimport wheel from 'mouse-wheel';\nimport Markdown from 'markdown';\n\nimport {speed} from \"../../utils/util\";\n\n\nconst toHTML = Markdown.markdown.toHTML;\n\ninterface propsInterface {\n    paused: boolean,\n    workRef?: any\n}\n\nconst endOfSentence = /[？！。~：]$/;\nconst comma = /\\D[，；、]$/;\nconst endOfBlock = /[^/]\\n\\n$/;\nconst WorkStyle: React.FC<propsInterface> = (props) => {\n    const {workRef} = props;\n\n\n    function setT(state: any, char: string) {\n        return handleChar(state, char);\n    }\n\n    const el2Ref: React.MutableRefObject<any> = useRef<HTMLElement>(null);\n\n    const writeTo: any = async (el: Element, message: string, index: number, interval: number, charsPerInterval: number) => {\n        let chars = message.slice(index, index + charsPerInterval);\n        index += charsPerInterval;\n\n        el.scrollTop = el.scrollHeight;\n        writeSimpleChar(chars);\n\n        if (index < message.length) {\n            let thisInterval = interval;\n            let thisSlice = message.slice(index - 2, index);\n            if (comma.test(thisSlice)) {\n                thisInterval = interval * 30;\n            }\n            if (endOfSentence.test(thisSlice)) {\n                thisInterval = interval * 70;\n            }\n            thisSlice = message.slice(index - 2, index + 1);\n            if (endOfBlock.test(thisSlice)) {\n                thisInterval = interval * 50;\n            }\n\n            do {\n                await Promise.delay(thisInterval);\n            } while (props.paused);\n            return writeTo(el, message, index, interval, charsPerInterval);\n        }\n    };\n    const writeSimpleChar = (char: string) => {\n        setText(char);\n    };\n\n    const [text, setText] = useReducer(setT, '');\n    // eslint-disable-next-line import/no-webpack-loader-syntax\n    const workText = require('!!raw-loader!./work.txt');\n    const mdText = toHTML(workText);\n\n    const [flipped, setFlipped] = useState(false);\n    const [show, setShow] = useState(false);\n    const [preview, setPreview] = useState(true);\n\n    useImperativeHandle(workRef, () => ({\n        write: async (index: number) => {\n            setShow(true);\n            await writeTo(el2Ref.current, workText, 0, speed, 1);\n        },\n        showWorkBox: () => {\n            setShow(true);\n            setPreview(false);\n            setFlipped(true);\n            setTimeout(() => {\n\n                el2Ref.current.scrollTop = 9999;\n\n                let flipping = false;\n                // @ts-ignore\n                wheel(el2Ref.current, async function (dx,dy) {\n                    if (flipping) return;\n                    let half = (el2Ref.current.scrollHeight - el2Ref.current.clientHeight) / 2;\n                    let pastHalf = flipped ? el2Ref.current.scrollTop < half : el2Ref.current.scrollTop > half;\n\n                    if (pastHalf) {\n                        setFlipped(!flipped);\n                        flipping = true;\n                        await Promise.delay(500);\n                        el2Ref.current.scrollTop = flipped ? 9999 : 0;\n                        flipping = false;\n                    }\n\n                    (el2Ref as any).scrollTop += (dy * (flipped ? -1 : 1));\n                }, true);\n            }, 200);\n        }\n    }));\n    return <>\n        {show ?\n            <pre id='work-text' ref={el2Ref} className={flipped ? 'flipped' : ''}>\n                {preview ?\n                    <div dangerouslySetInnerHTML={{__html: text}} />\n                    :\n                    <div>\n                        <div className=\"text\" dangerouslySetInnerHTML={{__html: workText}}/>\n                        <div className=\"md\" dangerouslySetInnerHTML={{__html: mdText}}/>\n                    </div>\n                }\n            </pre>\n            : null}\n    </>;\n\n};\n\nexport default WorkStyle;\n","import React, {useRef, useEffect} from 'react';\nimport Promise from 'bluebird';\nimport './App.css';\nimport StyleText from \"./components/style-text/style-text\";\nimport WorkStyle from \"./components/work-text/work-style\";\n\nconst App: React.FC = () => {\n    const styleRef: React.MutableRefObject<any> = useRef();\n    const workRef: React.MutableRefObject<any> = useRef();\n    let styleTagEl = document.getElementById('style-tag') as HTMLElement;\n    const startAnimation = async () => {\n        try {\n            await styleRef.current.write(0);\n            await workRef.current.write();\n            await styleRef.current.write(1);\n            workRef.current.showWorkBox();\n            await Promise.delay(2000);\n            await styleRef.current.write(2);\n        } catch (e) {\n            if (e.message === 'SKIP IT') {\n                surprisinglyShortAttentionSpan();\n            } else {\n                throw e;\n            }\n        }\n    };\n    const surprisinglyShortAttentionSpan = () => {\n        styleRef.current.writeToEnd();\n        // this.$refs.workText.showWorkBox()\n    };\n    const styleAppend = (styleText: any) => {\n        styleTagEl.textContent += styleText;\n    };\n    const styleOverwrite = (styleText: any) => {\n        styleTagEl.textContent = styleText;\n    };\n    useEffect(() => {\n        startAnimation().then();\n        // eslint-disable-next-line\n    }, []);\n    return (\n        <div id=\"App\">\n            <StyleText\n                animationSkipped={false}\n                paused={false}\n                styleOverwrite={styleOverwrite}\n                styleAppend={styleAppend}\n                innerRef={styleRef}/>\n            <WorkStyle\n                paused={false}\n                workRef={workRef}\n            />\n\n        </div>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}